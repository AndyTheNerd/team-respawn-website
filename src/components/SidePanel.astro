---
import SocialIcons from './SocialIcons.astro';

const pathname = Astro.url?.pathname ?? '';
const isHome = pathname === '/' || pathname === '/index.html';
const isBlog = pathname.startsWith('/blog');
const isHw2Stats = pathname === '/halo-wars-stats' || pathname === '/halo-wars-stats/';
const isAoe4Stats = pathname === '/aoe4-stats' || pathname === '/aoe4-stats/';
const isStorehausInfo = pathname === '/storehaus-info' || pathname === '/storehaus-info/';
const isStorehausPrivacy = pathname === '/storehaus/privacy-policy' || pathname === '/storehaus/privacy-policy/';
const isStorehausTerms = pathname === '/storehaus/terms-of-service' || pathname === '/storehaus/terms-of-service/';
---
<aside
  id="side-panel"
  class="side-panel"
  role="navigation"
  aria-label="Main navigation"
  aria-hidden="true"
>
  <div class="flex justify-end mb-8">
    <button
      id="close-panel-button"
      class="p-2 rounded-full hover:bg-gray-800 transition-colors duration-200"
      aria-label="Close navigation menu"
      type="button"
    >
      <svg class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <div class="mb-8">
    <h2 class="text-2xl font-extrabold mb-4 text-white">Content</h2>
    <nav class="flex flex-col space-y-2" aria-label="Main content navigation">
      <button
        data-tab-id="home-tab"
        class={`side-panel-tab-link ${isHome ? 'side-panel-tab-active' : 'side-panel-tab-inactive'} text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50`}
        type="button"
        role="menuitem"
      >
        <i class="fas fa-home mr-2" aria-hidden="true"></i>
        Home
      </button>
      <button
        data-tab-id="walkthroughs-tab"
        class="side-panel-tab-link side-panel-tab-inactive text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50"
        type="button"
        role="menuitem"
      >
        <i class="fas fa-video mr-2" aria-hidden="true"></i>
        Walkthroughs
      </button>
      <a
        href="/blog"
        class={`side-panel-tab-link ${isBlog ? 'side-panel-tab-active' : 'side-panel-tab-inactive'} text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50`}
        role="menuitem"
      >
        <i class="fas fa-blog mr-2" aria-hidden="true"></i>
        Blog
      </a>
      <a
        href="/halo-wars-stats"
        class={`side-panel-tab-link ${isHw2Stats ? 'side-panel-tab-active' : 'side-panel-tab-inactive'} text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50`}
        role="menuitem"
      >
        <i class="fas fa-chart-bar mr-2" aria-hidden="true"></i>
        HW2 Stats
      </a>
      <a
        href="/aoe4-stats"
        class={`side-panel-tab-link ${isAoe4Stats ? 'side-panel-tab-active' : 'side-panel-tab-inactive'} text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50`}
        role="menuitem"
      >
        <i class="fas fa-chess-rook mr-2" aria-hidden="true"></i>
        AoE4 Stats
      </a>
      <button
        data-tab-id="other-projects-tab"
        class="side-panel-tab-link side-panel-tab-inactive text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50"
        type="button"
        role="menuitem"
      >
        <i class="fas fa-project-diagram mr-2" aria-hidden="true"></i>
        Other Projects
      </button>
      <a
        href="/blog?category=Guides"
        class="side-panel-tab-link side-panel-tab-inactive text-left text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50"
        role="menuitem"
      >
        <i class="fas fa-gamepad mr-2" aria-hidden="true"></i>
        All Guides
      </a>
    </nav>
  </div>

  <div class="mb-8">
    <h2 class="text-2xl font-extrabold mb-4 text-white">More Team Respawn</h2>
    <nav class="flex flex-col space-y-2" aria-label="Site navigation">
      <a
        href="https://haloquotes.teamrespawntv.com/"
        target="_blank"
        rel="noopener noreferrer"
        class="text-lg font-semibold text-gray-400 hover:text-white transition-all duration-200 py-2 px-3 rounded-lg hover:bg-gray-800/50"
      >
        <i class="fas fa-quote-left mr-2" aria-hidden="true"></i>
        Halo Quotes Website
      </a>
      <p class="text-xs uppercase tracking-wider text-gray-500 px-3 pt-4">Storehaus Bot</p>
      <a
        href="/storehaus-info"
        class={`text-lg font-semibold transition-all duration-200 py-2 px-3 rounded-lg ${isStorehausInfo ? 'side-panel-tab-active' : 'text-gray-400 hover:text-white hover:bg-gray-800/50'}`}
      >
        <i class="fas fa-info-circle mr-2" aria-hidden="true"></i>
        Summary
      </a>
      <a
        href="/storehaus/privacy-policy"
        class={`text-lg font-semibold transition-all duration-200 py-2 px-3 rounded-lg ${isStorehausPrivacy ? 'side-panel-tab-active' : 'text-gray-400 hover:text-white hover:bg-gray-800/50'}`}
      >
        <i class="fas fa-shield-alt mr-2" aria-hidden="true"></i>
        Privacy Policy
      </a>
      <a
        href="/storehaus/terms-of-service"
        class={`text-lg font-semibold transition-all duration-200 py-2 px-3 rounded-lg ${isStorehausTerms ? 'side-panel-tab-active' : 'text-gray-400 hover:text-white hover:bg-gray-800/50'}`}
      >
        <i class="fas fa-file-contract mr-2" aria-hidden="true"></i>
        Terms of Service
      </a>
    </nav>
  </div>

  <div class="mt-auto flex justify-center space-x-4 text-gray-400" aria-label="Social media links">
    <SocialIcons />
  </div>
</aside>

<div id="overlay" class="overlay" aria-hidden="true" aria-label="Close navigation menu overlay"></div>
